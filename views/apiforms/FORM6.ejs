<!DOCTYPE html>
<html>
<head>
	<title>Form</title>
	<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
         rel = "stylesheet">
      <script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
      <script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
      <!-- Javascript -->
      <script>
         $(function() {
            $( "#datepicker-6" ).datepicker({
              dateFormat: 'dd/mm/yy',
               changeMonth: true,
      changeYear: true,
      yearRange: '1900:2050',
            });
         });
      </script>

      <script>
         $(function() {
            $( "#datepicker-7" ).datepicker({
              dateFormat: 'dd/mm/yy',
               changeMonth: true,
      changeYear: true,
      yearRange: '1900:2050',
            });
         });
      </script>

        <style>
        .ui-datepicker select.ui-datepicker-month, .ui-datepicker select.ui-datepicker-year {

    color: #000000;
}
      </style>
</head>
<body>

<div class="container">

<form action="" id="pass" method="post">
  <center><img src="images/ajax-loader.gif" width="100px;" height="100px;" id="loading6" style="display: none;"></center>
<div class="table-responsive">

    <h3>Passport Details</h3>
    <table class="table table-bordered table-striped table-highlight">
    	<thead>

    		<tr>
    			<th>Passport Number:</th>
          <th>Name:</th>
          <th>Surname:</th>
    		</tr>
    	</thead>

    	<tbody>
   			<tr>
   				<td><input type="text" class="form-control" name="passport_number" required /></td>
          <td><input type="text" class="form-control" name="passportname" required/></td>
          <td><input type="text" class="form-control" name="passportsurname" required/></td>
   			</tr>
   		</tbody>

   		<thead>

   			<tr>
   				<th>Fill the below details</th>
   			</tr>
    		<tr>

    			<th>D.O.B</th>
    			<th>Date of Expiry:</th>
          <th>Gender:</th>
    		</tr>
    	</thead>

    	<tbody>
   			<tr>

   				<td>DOB: <input type="text" id="datepicker-6" name="passbday" required/></td>
   				<td>DOE: <input type="text" id="datepicker-7" name="passdoe" required/></td>
                    <td>
            <label for="gender" >Select Gender:</label>
            <select style="width: 40%;   height: 30px;" name = "passgender" required>
                <option value="Male" selected="selected">Male</option>
                <option value="Female">Female</option>
                <option value="Gender">Other</option>
            </select>
          </td>
   			</tr>
   		</tbody>

   		<thead>
    		<tr>

    			<th>Passport Type:</th>
    			<th>Country Code:</th>
    		</tr>
    	</thead>

    	<tbody>
   			<tr>

   				<td>

            <select class="form-control" style="width: 40%;   height: 30px;" name="passtype" required>
                      <!----><option value="">None</option><option value="p">Personal</option><option value="s">Service</option><option value="d">Diplomatic</option>
                    </select></td>
   				<td><input type="text"  class="form-control" name="countrycode" pattern="^[a-zA-Z]{3}$" maxlength="3" minlength="3" required/>
          <p>Enter 3 letter Country Code of the passport holder.</p> </td>
   			</tr>
   		</tbody>
	</table>



	</div>

	<center><button type="submit"  class="btn" name="Submit" style="margin-bottom: 20px;">Submit Form</button></center>

</form>
<div class = "new_6" style= "display:none">Your Details Have been succesfully submitted</div>
</div>

</body>
<script src="./js/jquery.noty.packaged.min.js"></script>
<script>
	function generate(type, text) {
		var n =  noty({
			text: text,
			type: type,
			dismissQueue: true,
			layout: 'topRight',
			closeWith: ['click'],
			theme: 'relax',
			maxVisible: 10,
			animation: {
				open: 'animated bounceInRight',
				close: 'animated bounceOutRight',
				easing: 'swing',
				speed: 500
			}
		});
	}
	$("#pass").on('submit', function (e) {
		e.preventDefault();
		$('#loading6').show();
		$.ajax({
			type: "POST",
			url: '/index6',
			data: $('form').serialize(),
			success: function (data) {
				var messageDiv =
					'<div class="activity-item"> <i class="fa fa-check text-success"></i><div class="activity">Success</div> </div>';
				generate("success", messageDiv);
				$("#pass").hide();
				$(".new_6").show();
				var hidden = 0;
				const forms = $('form')
				forms.each(function (i, element) {
					if ($(element).is(':hidden')) {
						hidden = hidden + 1;
					}
				});

				if (forms.length === hidden) {
					$('#viewDashboard-btn').removeAttr('disabled');
				}
			},
			error: function (jqXHR, exception) {
				var errorObj = JSON.parse(jqXHR.responseText);
				if (!errorObj.process) {
					$("#pass").hide();
				}
				var messageDiv = '<div class="activity-item"><div class="activity">' +
					errorObj.message + '</div> </div>';
				generate("error", messageDiv);
			},
			complete: function () {
				$('#loading6').hide();
			}
		});
	});
</script>
</html>
